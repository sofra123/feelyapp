YUI.add("photo-groups-models",function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getAllContexts"].run(t,this.appContext)}},attributes:{id:{},groups:{isCollection:!0},total:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})},"@VERSION@",{requires:["api-helper","flickr-model-registry","flickr-promise","flickr-photos-getAllContexts-fetcher"]});YUI.add("flickr-photos-getAllContexts-fetcher",function(e,t){"use strict";e.namespace("ModelFetchers")["flickr-photos-getAllContexts"]={run:function(o,s){var l=this;return s.flipper.isFlipped("enable-scrappy-photo-page")&&(o.scrappy=!0),e.Promise.all([s.callAPI("flickr.photos.getAllContexts",this._processParams(o),!0),s.getModelRegistry("person-models"),s.getModelRegistry("photo-contexts-models"),s.getModelRegistry("favorite-models"),s.getModelRegistry("gallery-models"),s.getModelRegistry("group-pool-models"),s.getModelRegistry("set-models"),s.getModelRegistry("photostream-models"),s.getModelRegistry("photo-groups-models"),s.getModelRegistry("photo-sets-models"),s.getModelRegistry("photo-galleries-models"),s.getModelRegistry("group-models")]).then(function(e){return l._processResponse(e,o)},e.FetcherErrorLogger(t))},_processParams:function(t){var o;return o={photo_id:t.id,extras:e.APIHelper.request.getRebootPhotoExtras()+","+e.APIHelper.request.getRebootGroupExtras()+","+e.APIHelper.request.getRebootAlbumsListExtras(),primary_photo_extras:"url_sq, url_t, url_s, url_m, needs_interstitial"},t.scrappy&&(o.get_all_galleries=1,o.no_faves_context=1,o.per_type_limit=6,o.get_totals=1,o.sort="date-desc"),o},_processResponse:function(t,o){var s,l,r=t[0],a=t[1],p=t[2],d={},i=[],g=t[8],n=t[9],u=t[10],m=t[11];return d.faves=t[3],d.gallery=t[4],d.pool=t[5],d.set=t[6],d.stream=t[7],e.Object.each(d,function(t,o){r[o]&&e.Array.each(r[o],function(o){e.APIHelper.response.addContextToRegistry(o,t,a,m),i.push(t.proxy(o.id))})}),p.exists(o.id)||(s=p.add({id:o.id,totalGroups:r.totals&&r.totals.groups,totalSets:r.totals&&r.totals.sets,totalGalleries:r.totals&&r.totals.galleries}),p.setValue(o.id,"contexts",i)),g.addOrUpdate({id:o.id,total:r.totals&&r.totals.groups,groups:p.getContextsOfType(o.id,"group-pool-models")}),(l=p.getContextsOfType(o.id,"set-models")).forEach(function(e){e.setValue("totalCount",parseInt(e.getValue("photoCount"),10)+parseInt(e.getValue("videoCount"),10))}),n.addOrUpdate({id:o.id,total:r.totals&&r.totals.sets,sets:l}),u.addOrUpdate({id:o.id,total:r.totals&&r.totals.galleries,galleries:p.getContextsOfType(o.id,"gallery-models")}),s}}},"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-contexts-models","favorite-models","gallery-models","group-pool-models","photostream-models","set-models","photo-groups-models","photo-sets-models","photo-galleries-models","group-models"]});YUI.add("photo-contexts-models",function(e){function t(e){t.superclass.constructor.call(this,e),this.getMorePromises={"group-pool-models":{},"set-models":{},"gallery-models":{}},this.continuationKeys={"group-pool-models":{},"set-models":{},"gallery-models":{}}}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return this.appContext.flipper.isFlipped("enable-scrappy-photo-page")?e.ModelFetchers["flickr-photos-getAllContexts"].run(t,this.appContext):e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)}},getMoreContextsOfType:function(t,r,o){var s,n,i,l,a,p,u,c=this,g=e.APIHelper.request.getRebootPhotoExtras();switch(r){case"group-pool-models":s="flickr.photos.getGroups",i="groups.group",g+=","+e.APIHelper.request.getRebootGroupExtras();break;case"set-models":s="flickr.photos.getSets",i="sets.set";break;case"gallery-models":s="flickr.photos.getGalleries",i="galleries.gallery"}return s?this.exists(t)?"-1"===(l=this.continuationKeys[r][t]||"0")?e.Promise.resolve({type:r,newContexts:[],loadedAll:!0}):(n={photo_id:t,extras:g,primary_photo_extras:"url_sq, url_t, url_s, url_m",continuation:l,per_page:o},p=t+"_"+l,(u=this.getMorePromises[r][p])?u:(this.getMorePromises[r][p]=new e.FlickrPromise({apiResponse:this.appContext.callAPI(s,n,!0),contextRegistry:this.appContext.getModelRegistry(r),personRegistry:this.appContext.getModelRegistry("person-models")}).then(function(o){var s,n,l,u=[],g=o.apiResponse,d=o.contextRegistry,f=o.personRegistry;return(n=i.split(".").reduce(function(t,r){return e.Lang.isObject(t)?t[r]:void 0},g))&&(e.Array.each(n,function(t){e.APIHelper.response.addContextToRegistry(t,d,f),u.push(d.proxy(t.id))}),u.length&&(l=c.getContextsOfType(t,r).map(function(e){return e.getValue("id")}),(u=u.filter(function(e){return-1===l.indexOf(e.getValue("id"))})).length&&c.getValue(t,"contexts").appendToListMulti(u))),void 0===(a=g.continuation)?a="-1":e.Lang.isNumber(a)&&(a+=""),s="-1"===a,c.continuationKeys[r][t]=a,delete c.getMorePromises[r][p],{type:r,newContexts:u,loadedAll:s}}),this.getMorePromises[r][p])):e.Promise.reject("[photo-contexts-models] getMoreContextsOfType was called for an ID that isn't in the registry: "+t):e.Promise.reject("[photo-contexts-models] getMoreContextsOfType was called without an invalid type: "+r)},getContextsOfType:function(t,r){return r=e.Array(r),this.getValue(t,"contexts").getList().filter(function(e){return r.indexOf(e.registry.name)>-1})},getContextsNotOfType:function(t,r){return r=e.Array(r),this.getValue(t,"contexts").getList().filter(function(e){return-1===r.indexOf(e.registry.name)})},attributes:{contexts:{isCollection:!0},totalGroups:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},totalSets:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},totalGalleries:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})},"@VERSION@",{requires:["api-helper","flickr-model-registry","flickr-promise","flickr-photos-getInfo-fetcher","flickr-photos-getAllContexts-fetcher"]});YUI.add("vr-overlay-view",function(e,t){var i,n=require("hermes-core/flog")(t);i={css:{destinationContainer:"body",closeX:".close"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.nsid=e.nsid,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.immersed=!1,this},subviewConfig:{},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(t){return e.set("photo",t),e.canVr().then(function(t){e.set("canVr",t)})})},buildContainer:function(){var e=this.get("canVr");return this.set("isActiveViewAgnostic",!0),e?(this.setContainerWithTemplate("vr-overlay"),this):this},buildErrorContainer:function(){this.setContainerHTML("")},activate:function(){var t=this;if(this.get("canVr"))return this.loadFlickvr().then(function(){var n=t.get("container");n.addClass("active"),n.one(i.css.closeX)&&t.registerEventHandler(n.one(i.css.closeX).on("click",e.bind(t.closeVr,t))),t.registerEventHandler(t.get("container").on("click",t.openVr,t)),t.isMobile||t.openVr()}).then(null,function(e){n.error("Failed to load flickvr from CDN",{err:e})}),this},loadFlickvr:function(){return new e.Promise(function(t,i){if(window.Flickvr)return t();e.Get.js("https://combo.staticflickr.com/ap/flickvr/version.js",function(o){return o?i():window.FlickvrVersion?void e.Get.js("https://combo.staticflickr.com/ap/flickvr/"+window.FlickvrVersion+".js",function(e){return e?i():(n.log("flickvr loaded successfully from CDN"),t())}):i()})})},hasEquirectangularTag:function(){return this.appContext.getModel("photo-tags-models",this.photoId).then(function(e){var t=!1;return e.toJSON().tags.forEach(function(e){"equirectangular"===e.tagRaw.toLowerCase()&&(t=!0)}),t})},inEquirectangularGroup:function(){return this.appContext.getModel("photo-groups-models",this.photoId).then(function(e){var t=!1;return e.toJSON().groups.forEach(function(e){"44671723@N00"===e.id&&(t=!0)}),t})},canVr:function(){var t,i,n=!1;return this.appContext.flipper.isFlipped("enable-vr")?((t=this.get("photo"))&&(i=t.getValue("aspectRatio"))&&i>=1.99&&i<=2.01&&(n=!0),n?e.Promise.all([this.appContext.callAPI("flickr.vr.isEquirectangular",{photo_id:t.id})]).then(function(t){return e.Promise.resolve(!!t[0].is_equirectangular)}):e.Promise.resolve(!1)):e.Promise.resolve(!1)},onParentViewEvent:function(e,t){if(t&&t[0])switch(t[0]){case"vrIconClicked":this.openVr();break;case"vKeyPressed":this.toggleVr()}},toggleVr:function(){this.immersed?this.closeVr():this.openVr()},openVr:function(t){if(this.immersed||t&&t.target.hasClass("close"))this.vr.controls&&this.vr.controls.autoRotate&&(this.vr.controls.autoRotate=!1);else{var i,n,o=this,r=this.get("photo").getLargestSize(),s=this.templates("flickr-balls")({}),a=new Image;t&&t.halt(),(n=e.Node.create("<div></div>")).addClass("vr-loading-layer"),n.addClass("fluid"),n.append(s),o.get("container").append(n),i=r.displayUrl,a.crossOrigin="anonymous",a.onload=function(){o.immersed=!0,o.vr=new window.Flickvr,o.vr.initialize(i,{container:o.get("container").getDOMNode(),useContainerDimensions:!o.isMobile,enableVrHeadset:o.appContext.flipper.isFlipped("enable-vr-headset"),autoRotate:!o.isMobile}).then(function(t){e.fire("photo:entering-vr"),t.style.position="absolute",o.vr.enterVR(),o.get("container").one(".vr-loading-layer").remove(),o.get("container").addClass("immersed"),o.escHandle=o.attachKeyEvent("down:27",e.betterThrottle(o.closeVr.bind(o),100))})},a.src=i}},closeVr:function(e){var t=this.get("container");e&&e.preventDefault(),this.vr&&this.vr.destroy(),this.escHandle&&(this.detachRegisteredEvent(this.escHandle),delete this.escHandle),this.immersed=!1,t.removeClass("immersed")},beforeDestroy:function(){this.set("lastContainer",this.get("container")),this.immersed&&this.closeVr()},destructor:function(){var e=this.get("lastContainer");e&&(e.remove(!0),this.set("lastContainer",null))}})},"@VERSION@",{requires:["flickr-view","better-throttle","get","hermes-template-vr-overlay","hermes-template-flickr-balls"],optional:["photo-models","photo-tags-models","photo-groups-models"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-lang-photo-page-scrappy_de-de",function(e,n){e.Intl.add("hermes/photo-page-scrappy","de-DE",{PAGE_TITLE:["${title}"," | Flickr"],BACK_TO:["Zurück zu ","${entryType}"],COULDNT_UPDATE_SETTINGS:["Wir konnten deine Einstellungen nicht aktualisieren"],ADULT_CONTENT:["Nicht jugendfreier Inhalt"],MATURE_AUDIENCES:["Dieser Inhalt ist nur für Erwachsene geeignet."],USER_DISCRETION:["Ein umsichtiger Umgang wird empfohlen."],SHOW_ME_THIS_CONTENT_TYPE:["Ab jetzt diesen Inhaltstyp anzeigen "],CHANGE_SAFE_SEARCH_IN_SETTINGS:['Du kannst die <a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">Einstellungen des Filters für die sichere Suche</a> jederzeit in deinem Kontoeinstellungen ändern.'],SIGNED_IN_FOR_CONTENT:["Du musst angemeldet sein, um diesen Inhalt anzuzeigen."],VIDEO_COMING_SOON:["Video-Support in Kürze"],FIND_OUT_MORE_AD:["Erfahre mehr auf ","${brand}"],SHARE_THIS_PHOTO:["Dieses Foto teilen"],DOWNLOAD_THIS_VIDEO:["Dieses Video herunterladen"],DOWNLOAD_THIS_PHOTO:["Dieses Foto herunterladen "],VIEW_ALL_SIZES:["Alle Größen anzeigen"],DOWNLOAD_PHOTO:["Foto herunterladen"],SOME_RIGHTS_RESERVED:["Bestimmte Rechte vorbehalten"],DOWNLOAD:["Herunterladen"],ERROR_LOADING_CONTEXT:["Fehler beim Laden von Kontext"],ADD_TITLE:["Titel hinzufügen"],ADD_DESCRIPTION:["Beschreibung hinzufügen"],TITLE_DESCRIPTION_FAILURE:["Titel und Beschreibung können momentan nicht geändert werden."],VIEW_PREVIOUS_COMMENT:["Vorherigen Kommentar anzeigen"],VIEW_MORE_PREVIOUS_COMMENTS:["Vorherige ","${count}"," Kommentare anzeigen"],EMPTY_COMMENT_ERROR:["Leeres Kommentarfeld? So klappt es nicht!"],COMMENT_RATE_LIMIT_ERROR:["Ganz ruhig! Um die Flickr-Community vor Spam und Spam-Verhalten zu schützen, haben wir einige Einschränkungen für Kommentare vorgenommen."],COMMENT_POST_ERROR:["Dein Kommentar konnte nicht gepostet werden."],MORE_COMMENTS_ERROR:["Es wurden keine weiteren Kommentare gefunden."],COMMENT_PERMALINK_ERROR:["Der angegebene Kommentar zu dem Foto konnte nicht gefunden werden."],DELETE_COMMENT:["Kommentar löschen"],COMMENT_DELETE_CONFIRMATION:["Willst du diesen Kommentar wirklich löschen?"],COMMENT_DELETE_ERROR:["Dein Kommentar konnte nicht gelöscht werden."],COMMENT_LOADING_ERROR:["Fehler beim Laden der Kommentare"],COMMENT:["Kommentieren"],SHOW_MORE_COMMENTS:["${count}"," weitere"],REPLY:["Antworten"],PERMALINK:["Permalink"],SINGLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAlias}",'/">',"${displayName}","</a> hat das als Favoriten hinzugefügt"],DOUBLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a> und <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}","</a> haben das als Favoriten hinzugefügt"],TRIPLE_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a>und <a class="faved-by-person-link" href="/photos/',"${pathAliasThree}",'/">',"${displayNameThree}","</a> haben das als Favoriten hinzugefügt"],MULTI_FAVER:['<a class="faved-by-person-link" href="/photos/',"${pathAliasOne}",'/">',"${displayNameOne}",'</a>, <a class="faved-by-person-link" href="/photos/',"${pathAliasTwo}",'/">',"${displayNameTwo}",'</a> und <a class="remaining-faved-by" href="#">',"${count}"," weitere </a>  haben das als Favoriten hinzugefügt"],RELATIONSHIP_FRIEND_ERROR:["Es ist ein Problem bei der Einstellung des Beziehungsstatus auf „Freund/in“ aufgetreten."],RELATIONSHIP_FAMILY_ERROR:["Es ist ein Problem bei der Einstellung des Beziehungsstatus auf „Familie“ aufgetreten."],HIDE_EXIF:["EXIF verbergen"],SHOW_EXIF:["EXIF anzeigen "],EDIT_LOCATION:["Ort bearbeiten"],EDIT_LOCATION_ORGANIZR:["Wir sind dabei, unsere Fotoerfahrung neu zu gestalten. Vorerst kannst du einen Ort in Organizr bearbeiten."],SAVE_LOCATION:["Standort speichern"],APERTURE:["Blende"],FOCAL_LENGTH:["Brennweite"],EXPOSURE_TIME:["Belichtungszeit"],FLASH_AUTO_FIRED:["Blitz (automatisch, ausgelöst)"],FLASH_AUTO_NO_FIRE:["Blitz (automatisch, nicht ausgelöst)"],FLASH_ON_FIRED:["Blitz (an, ausgelöst)"],FLASH_ON_NO_FIRE:["Blitz (an, nicht ausgelöst)"],FLASH_OFF:["Blitz (aus, nicht ausgelöst)"],FLASH_SIMPLE_ON:["Ein"],FLASH_SIMPLE_OFF:["Aus"],POWERED_BY:["POWERED BY"],FOURSQUARE:["FOURSQUARE"],ADD_PHOTO_TO_MAP:["Dieses Foto zu deiner Karte hinzufügen"],SINGULAR_FAVE:["Favorit"],PLURAL_FAVE:["Favoriten"],SINGULAR_VIEW:["Aufruf"],PLURAL_VIEW:["Aufrufe"],SINGULAR_COMMENT:["Kommentar"],PLURAL_COMMENT:["Kommentare"],LICENSE_ERROR:["Es ist ein Problem beim Ändern der Lizenz für dein Foto aufgetreten"],ALL_RIGHTS_RESERVED:["Alle Rechte vorbehalten"],NO_RESTRICTIONS:["Keine bekannten Urheberrechtseinschränkungen"],PUBLIC_DOMAIN:["Öffentliche Domäne"],USA_GOV_WORK:["Urheberrecht bei der U.S.-Regierung"],SAFETY_CHANGE_ERROR:["Es ist ein Problem beim Ändern der Sicherheitsstufe für dein Foto aufgetreten"],PRIVACY_CHANGE_ERROR:["Es ist ein Problem beim Ändern des Datenschutzes für dein Foto aufgetreten"],COMMENT_PERM_CHANGE_ERROR:["Es ist ein Problem beim Ändern der Kommentarberechtigung für dein Foto aufgetreten"],FLAG_PHOTO:["Foto markieren"],MARK_FOR_REVIEW:["Zur Prüfung markieren"],ADDITIONAL_INFO:["Weitere Infos"],VIEWING_THIS_PHOTO:["Anzeige dieses Fotos"],PRIVACY_UPDATE_ERROR:["Es ist ein Problem beim Aktualisieren des Datenschutzes aufgetreten. Bitte versuche es erneut."],META_PERMS_UPDATE_ERROR:["Es ist ein Problem beim Aktualisieren der Berechtigung zum Hinzufügen von Metadaten aufgetreten. Versuche es erneut."],ADD_META_TO_THIS_PHOTO:["Tags und Leute zu diesem Foto hinzufügen"],COMMENT_PERMS_UPDATE_ERROR:["Es ist ein Problem beim Aktualisieren der Kommentarberechtigung aufgetreten. Bitte versuche es erneut."],COMMENTING_ON_THIS_PHOTO:["Dieses Foto kommentieren"],SAFETY_UPDATE_ERROR:["Es ist ein Problem beim Aktualisieren der Sicherheitsstufe aufgetreten. Bitte versuche es erneut."],SAFETY_LEVEL_OF_PHOTO:["Sicherheisstufe für dieses Foto"],FLAG_ERROR:["Es ist ein Problem beim Markieren dieses Fotos aufgetreten. Bitte versuche es erneut."],PROVIDE_FEEDBACK:["Feedback zur neuen Fotoseite geben"],ERROR_DELETING_AUTOTAG:["Fehler beim Löschen des automatischen Tags"],AUTOTAGS:["Automatische Tags"],CONTACT_LIST_ERROR:["Beim Aufrufen der Kontaktliste ist ein Fehler aufgetreten. Bitte versuche es erneut."],FAILED_TO_REMOVE_PERSON:["Entfernen der Person vom Foto fehlgeschlagen."],PERSON_CANNOT_BE_TAGGED:["Für diese Person kann kein Tag hinzugefügt werden."],PEOPLE_IN_PHOTO:["Personen im Foto"],ADD_PEOPLE:["Personen hinzufügen"],ADD_PERSON:["Person hinzufügen"],ERROR_REMOVING_FROM_GROUP:["Beim Entfernen dieses Fotos aus der Gruppe ist ein Problem aufgetreten"],ERROR_ACCEPTING_INVITATION:["Beim Annehmen der Gruppeneinladung ist ein Problem aufgetreten"],SEARCH_GROUPS:["Gruppen suchen"],PHOTO_NOT_IN_GROUPS:["Dieses Foto befindet sich derzeit in keiner Gruppe"],ADD_TO_GROUP:["Zu einer Gruppe hinzufügen"],INVITE_TO_GROUP:["In eine Gruppe einladen"],ONE_GROUP_INVITATION:["Du hast 1 Gruppeneinladung."],N_GROUP_INVITATIONS:["Du hast ","${count}"," Gruppeneinladungen."],VIEW_MORE_GROUPS:["Weitere Gruppen anzeigen"],ERROR_REMOVING_FROM_ALBUM:["Beim Entfernen dieses Fotos aus dem Album ist ein Problem aufgetreten"],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:["Wenn du das letzte Foto aus diesem Album löschst, wird auch das Album selbst gelöscht."],REMOVE_PHOTO_AND_ALBUM:["Foto entfernen und Album löschen"],ADD_PHOTO_TO_ALBUM:["Dieses Foto einem Album hinzufügen"],SEARCH_ALBUMS:["Alben durchsuchen"],ADD_TO_ALBUM:["Zu einem Album hinzufügen"],PHOTO_NOT_IN_ALBUMS:["Dieses Foto befindet sich derzeit in keinem Album"],VIEW_MORE_ALBUMS:["Weitere Alben anzeigen"],PHOTO_IN_ONE_ALBUM:["Dieses Foto befindet sich derzeit in 1 Album"],PHOTO_IN_N_ALBUMS:["Dieses Foto befindet sich derzeit in ","${count}"," Alben"],INVITE_PENDING:["Einladung ausstehend"],CANCEL_INVITE:["Einladung ablehnen"],ACCEPT_INVITE:["Einladung annehmen"],ONE_ITEM:["1 Objekt"],N_ITEMS:["${count}"," Objekte"],ERROR_REMOVING_FROM_GALLERY:["Beim Entfernen dieses Fotos aus der Galerie ist ein Problem aufgetreten"],SEARCH_GALLERIES:["Galerien durchsuchen"],ADD_TO_GALLERY:["Zu einer Galerie hinzufügen"],PHOTO_NOT_IN_GALLERIES:["Dieses Foto befindet sich derzeit in keiner Galerie"],VIEW_MORE_GALLERIES:["Weitere Galerien anzeigen"],PHOTO_IN_ONE_GALLERY:["Dieses Foto befindet sich derzeit in 1 Galerie"],PHOTO_IN_N_GALLERIES:["Dieses Foto befindet sich derzeit in ","${count}"," Galerien"],DELETE_PHOTO:["Foto löschen"],PERMANTENTLY_DELETE:["Möchtest du dieses Foto dauerhaft löschen?"],EDIT_PHOTO:["Foto bearbeiten"],NO_VIDEO_ROTATION:["Videos können nicht gedreht werden"],ROTATE:["Drehen"],NO_VIDEO_REPLACE:["Videos können nicht ersetzt werden"],REPLACE:["Ersetzen"],PHOTO_NAVIGATION:["Foto-Navigation"],THUMBNAIL_NAVIGATION:["Thumbnail-Navigation"],ZOOM:["Zoomen"],VIEW_IN_LIGHTBOX:["Im Leuchtkasten anzeigen"],BACK_TO_CONTEXT:["Zurück zum Kontext"],ADD_TAG:["Tag hinzufügen"],GO_TO_ORGANIZER:["Zu Organizr gehen"],ALBUM:["Album"],ALBUMS:["Alben"],ERROR_LOADING_ALBUMS:["Beim Laden deines Albums ist ein Problem aufgetreten."],ERROR_ADDING_PHOTO_TO_ALBUM:["Beim Hinzufügen dieses Fotos zum Album ist ein Problem aufgetreten"],ERROR_REMOVING_PHOTO_FROM_ALBUM:["Beim Entfernen dieses Fotos aus dem Album ist ein Problem aufgetreten"],ERROR_LOADING_GROUPS:["Beim Laden der Gruppen, zu der du Fotos hinzufügen kannst, ist ein Problem aufgetreten"],ERROR_ADDING_TO_GROUP:["Beim Hinzufügen dieses Fotos zur Gruppe ist ein Problem aufgetreten"],ERROR_ADDING_TO_GROUP_NOT_OWNER:["Es tut uns leid, aber das Foto konnte nicht zur Gruppe hinzugefügt werden, weil es dir nicht gehört."],ERROR_ADDING_TO_GROUP_NOT_MEMBER:["Es tut uns leid, aber das Foto konnte nicht zur Gruppe hinzugefügt werden. Du bist kein Mitglied der Gruppe."],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:["Das Foto befindet sich bereits in diesem Gruppenpool."],ERROR_ADDING_TO_GROUP_MAX_POOLS:["Es tut uns leid, aber das Foto konnte nicht zur Gruppe hinzugefügt werden, weil es bereits in den maximal möglichen Gruppenpools enthalten ist."],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:["Es tut uns leid, aber das Foto konnte nicht zur Gruppe hinzugefügt werden. Du hast bereits die maximale Anzahl an Fotos zum Pool hinzugefügt."],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:["Dein Foto wurde der Warteschlange für die Gruppe hinzugefügt."],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:["Dein Foto befindet sich bereits in der Warteschlange für die Gruppe."],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:["Tut uns leid, dieses Foto ist der gewählten Gruppe nicht erlaubt. Weitere Informationen findest du in den gruppenspezifischen Anforderungen bezüglich Medientyp, Inhaltstyp, Sicherheitsstufe und geografischer Standort."],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:["Es tut uns leid, aber das Foto konnte nicht zur Gruppe hinzugefügt werden. Die Gruppe hat die maximale Anzahl an Fotos in einem Pool erreicht."],ERROR_INVITING_TO_GROUP:["Beim Einladen dieses Fotos zur Gruppe ist ein Problem aufgetreten"],ERROR_CANCELING_GROUP_INVITIATON:["Beim Stornieren der Einladung dieses Fotos zur Gruppe ist ein Problem aufgetreten"],NO_MATCHES:["Keine Übereinstimmungen"],CREATE_NEW:["Neu erstellen"],ERROR_LOADING_GROUP_INVITATIONS:["Beim Laden der Gruppeneinladungen dieses Fotos ist ein Problem aufgetreten"],NO_GROUP_INVITATIONS:["Keine ausstehenden Gruppeneinladungen"],PENDING_INVITATIONS_FOR_PHOTO:["Ausstehende Einladungen für dieses Foto"],LOADING_INVITATIONS:["Einladungen werden geladen"],ERROR_LOADING_GALLERIES:["Beim Laden deiner Galerien ist ein Problem aufgetreten."],ERROR_ADDING_TO_GALLERY:["Beim Hinzufügen dieses Fotos zur Galerie ist ein Problem aufgetreten"],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:["Der Eigentümer dieses Fotos gestattet nicht, dass das Foto zur Galerie hinzugefügt wird"],ERROR_CREATING_GALLERY:["Beim Erstellen deiner neuen Galerie ist ein Problem aufgetreten."],DATE_TAKEN_FORMAT:["Das Aufnahmedatum muss im Format /MM/TT/JJJJ hh:mm:ss sein."],DATE_POSTED_FUTURE:["Das Datum der Veröffentlichung kann nicht in der Zukunft liegen."],DATE_UPLOADED_FUTURE:["Das Upload-Datum darf nicht in der Zukunft liegen."],DATE_POSTED_FLICKR_JOIN:["Das Datum der Veröffentlichung muss nach deiner Anmeldung bei Flickr liegen."],DATE_UPLOADED_FLICKR_JOIN:["Das Upload-Datum muss nach deiner Anmeldung bei Flickr liegen."],ERROR_SAVING_DATE:["Fehler beim Speichern von Daten"],DATE_INVALID:["Eine oder mehrere Datumsangaben sind ungültig"],EDIT_DATES:["Datumsangaben bearbeiten"],DATE_TAKEN_ON:["Aufnahmedatum"],DATE_POSTED_ON:["Veröffentlichungsdatum"],DATE_UPLOADED_ON:["Upload-Datum"],TAKEN_CIRCA:["Aufgenommen ca. ","${intlDate}"],TAKEN_SOMETIME_IN:["Aufgenommen irgendwann im Jahr ","${intlDate}"],TAKEN_IN:["Aufgenommen im ","${intlDate}"],TAKEN_ON:["Aufgenommen am ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON:["Hochgeladen am ","${intlDate}"],SOMETHING_WENT_WRONG:["Es ist ein Problem aufgetreten."],REFRESH_BROWSER:["Aktualisiere deinen Browser und versuche es erneut."],TWITTER_NOT_FOUND:["Twitter-Account wurde nicht im Beitrag gefunden"],TUMBLR_NOT_FOUND:["Tumblr-Account wurde nicht im Beitrag gefunden"],LINK:["Link"],LINK_TO_VIDEO:["Link zu diesem Video:"],LINK_TO_PHOTO:["Link zu diesem Foto:"],NO_LINKS_FOR_RESTRICTED_VIDEO:["Links sind nicht für beschränkte Videos verfügbar"],PRIVATE_VIDEO_SHARE:["Dies ist ein privates Video. Möchtest du es dennoch teilen?"],NO_LINKS_FOR_RESTRICTED_PHOTO:["Links sind nicht für beschränkte Fotos verfügbar"],PRIVATE_PHOTO_SHARE:["Dies ist ein privates Foto. Möchtest du es dennoch teilen?"],SHARING_RESTRICTED_VIDEO:["Die Freigabe für dieses Video ist beschränkt."],SHARING_RESTRICTED_PHOTO:["Die Freigabe für dieses Foto ist beschränkt."],EMBED:["Einbetten"],PUBLIC_TO_SHARE:["Teile dieses Foto öffentlich, um den Code zum Einbetten anzuzeigen."],SIZE:["Größe:"],TITLE_AND_OWNER_AT_START:["Titel und Name des Eigentümers zu Beginn anzeigen"],SHARE_NOW:["Jetzt teilen!"],SHARE_PHOTO:["Foto teilen"],SHARE_ON_TWITTER:["Auf Twitter teilen"],AUTHORIZE_FOR_TWITTER:["Flickr zum Posten auf Twitter autorisieren."],SHARE_ON_TUMBLR:["Auf Tumblr teilen"],PUBLISH_NOW:["Jetzt veröffentlichen"],ADD_TO_QUEUE:["Zur Warteschlange hinzufügen"],SAVE_AS_DRAFT:["Als Entwurf speichern"],AUTHORIZE_FOR_TUMBLR:["Flickr zum Posten auf Tumblr autorisieren."],SHARE_VIA_MAIL:["Per Mail versenden"],SCREEN_NAME_OR_EMAIL:["Benutzername oder E-Mail"],SQUARE:["Quadratisch"],SMALL:["Klein"],MEDIUM:["Mittel"],LARGE:["Groß"],ORIGINAL:["Original"],DUPLICATE_TAG:["Tag vervielfältigen"],INVALID_TAG:["Ungültiges Tag"],MAXIMUM_TAG_LIMIT:["Maximales Tag-Limit (76) erreicht"],MAX_TAG_LIMIT:["Maximales Tag-Limit (75) erreicht"],ERROR_ADDING_TAG:["Fehler beim Hinzufügen des Tags"],ERROR_DELETING_TAG:["Fehler beim Löschen des Tags"],TAGS:["Tags"],ADD_TAGS:["Tags hinzufügen"],ADD_A_TAG:["Tag hinzufügen"],PHOTO_IN_ONE_GROUP:["Dieses Foto ist in 1 Gruppe"],PHOTO_IN_MANY_GROUPS:["Dieses Foto ist in ",{type:"number",valueName:"count"}," Gruppen"],PHOTO_IN_NO_GROUPS:["Dieses Foto ist in keiner Gruppe"],ADD_A_COMMENT:["Kommentar hinzufügen"],COMMENT_TUTORIAL:["drücke die Eingabetaste, um einen Kommentar zu posten, und die Umschalt- und Eingabetaste für eine neue Zeile"],SIGNED_IN_TO_POST_A_COMMENT:["Du musst angemeldet sein, um einen Kommentar zu posten"],SHARE:["Teilen"],CODE:["Code"],INCLUDE_A_MESSAGE:["Nachricht hinzufügen"],FOR_MORE_INFORMATION_SAFESEARCH:['Weitere Informationen findest du in <a href="//www.flickr.com/help/photos/?search=flag#145">diesen FAQ</a>.'],FLAG_CONFIRMATION_SAFE_WITHIN:['Dieses Foto wurde als <a href="//www.flickr.com/help/filters/#258">sicher</a> markiert und fällt unter deine <a href="//www.flickr.com/account/prefs/safesearch/">Einstellungen des Filters für die sichere Suche</a>.'],FLAG_CONFIRMATION_SAFE_OUTSIDE:['Dieses Foto wurde als <a href="//www.flickr.com/help/filters/#258">sicher</a> markiert und fällt nicht unter deine <a href="//www.flickr.com/account/prefs/safesearch/">Einstellungen des Filters für die sichere Suche</a>.'],FLAG_CONFIRMATION_MODERATE_WITHIN:['Dieses Foto wurde als <a href="//www.flickr.com/help/filters/#258">mittel</a> markiert und fällt unter deine  <a href="//www.flickr.com/account/prefs/safesearch/">Einstellungen des Filters für die sichere Suche</a>.'],FLAG_CONFIRMATION_MODERATE_OUTSIDE:['Dieses Foto wurde als <a href="//www.flickr.com/help/filters/#258">mittel</a> markiert und fällt nicht unter deine <a href="//www.flickr.com/account/prefs/safesearch/">Einstellungen des Filters für die sichere Suche</a>.'],FLAG_CONFIRMATION_RESTRICTED_WITHIN:['Dieses Foto wurde als <a href="//www.flickr.com/help/filters/#258">eingeschränkt</a> markiert und fällt unter deine <a href="//www.flickr.com/account/prefs/safesearch/">Einstellungen des Filters für die sichere Suche</a>.'],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:['Dieses Foto wurde als <a href="//www.flickr.com/help/filters/#258">eingeschränkt</a> markiert und fällt nicht unter deine  <a href="//www.flickr.com/account/prefs/safesearch/">Einstellungen des Filters für die sichere Suche</a>.'],PRIVATE_PHOTO:["Privatfoto"],PHOTO_UNFIT_FOR_YOUR_EYES:["Dieses Foto ist für dich nicht sichtbar. Hier ist ein Kätzchen für dich: (^._.^)ﾉ"],NO_PHOTO_WITH_THAT_ID:["Es wurde kein Foto mit dieser ID gefunden ","${photoId}"],NO_MEMBERS_FOUND:["Keine Mitglieder gefunden"],TAKEN_ON_INTL:["Aufgenommen am ",{type:"date",valueName:"intlDate",format:"long"}],UPLOADED_ON_INTL:["Hochgeladen am ",{type:"date",valueName:"intlDate",format:"long"}],TAKEN_IN_MONTH:["Aufgenommen im ",{type:"date",valueName:"intlDate",format:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:["Im Leuchtkasten anzeigen"],ZOOM_MAX_MESSAGE:["Immer langsam, Tiger! Dieses Foto hat bereits die maximale Größe erreicht."],CLICK_TO_FAVE_PHOTO:["Hier klicken, um dieses Foto zu den Favoriten hinzuzufügen"],CLICK_TO_FAVE_VIDEO:["Hier klicken, um dieses Video zu den Favoriten hinzuzufügen"],BACK_TO_ACTIVITY_FEED:["Zurück zum Aktivitäten-Feed"],BACK_TO_PHOTOSTREAM:["Zurück zum Fotostream"],BACK_TO_SHARED_PHOTOS:["Zurück zu geteilten Fotos"],BACK_TO_ALBUM:["Zurück zum Album"],BACK_TO_CONTACTS_LIST:["Zurück zur Kontaktliste"],BACK_TO_FAVORITES:["Zurück zu Favoriten"],BACK_TO_GALLERY:["Zurück zur Galerie"],BACK_TO_PROFILE:["Zurück zum Profil"],BACK_TO_EXPLORE:["Zurück zu Entdecken"],BACK_TO_COMMONS:["Zurück zu Commons"],BACK_TO_GROUP:["Zurück zur Gruppe"],BACK_TO_GROUPS:["Zurück zu Gruppen"],BACK_TO_MAP:["Zurück zur Karte"],BACK_TO_SEARCH:["Zurück zur Suche"],BACK_TO_TAG:["Zurück zum Tag"],ERROR_ADDING_PHOTOS_TO_ALBUM:["Beim Hinzufügen dieser Fotos zum Album ist ein Problem aufgetreten"],ERROR_REMOVING_PHOTOS_FROM_ALBUM:["Beim Entfernen dieser Fotos aus dem Album ist ein Problem aufgetreten"],ERROR_CREATING_ALBUM:["Beim Erstellen deines neuen Albums ist ein Problem aufgetreten"],STRICTER_PRIVACY_CHANGE_DIALOG_TITLE:["Einstellen einer strengeren Datenschutzstufe"],STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE:["Wenn für ein Foto eine strengere Datenschutzstufe gewählt wird, einem Foto ein strengerer Privatsphäre-Level eingestellt wird, werden alle bereits gesammelten Favoriten entfernt. Zudem wird dadurch die URL des Fotos geändert."],TAGS_HELPER_TEXT:["Tags sind Stichwörter, die die Suche nach Fotos erleichtern. Du kannst beliebig viele hinzufügen, und die freundlichen Roboter von Flickr helfen dir dabei, indem sie noch ein paar ergänzen."],TAGS_HELP_TEXT:["Tags sind Schlüsselwörter, mit denen du Fotos in Flickr einfacher finden kannst. Die von dir hinzugefügten werden in Dunkelgrau angezeigt. Die freundlichen Roboter von Flickr helfen dir, indem sie einige Tags für dich hinzufügen. Diese werden nur mit einer grauen Umrandung angezeigt."],PRIVATE_TAGS_OWNER_HELPER_TEXT:["Dieser private Tag ist nur für Sie sowie die Freunde und Familienmitglieder sichtbar, die dieses Foto sehen dürfen."],PRIVATE_TAGS_FRIENDS_FAMILY_HELPER_TEXT:["Dieser private Tag ist für Sie nur sichtbar, wenn Sie ein Freund oder Familienmitglied des Bildinhabers sind."],CREATE_WALLART_WITH_PHOTO:["Wall Art mit diesem Foto erstellen"],ERROR_ROTATING_PHOTO:["Beim Drehen dieses Fotos ist ein Problem aufgetreten. Bitte schließe es und versuche es erneut."],ROTATE_PHOTO:["Foto drehen"],ERROR_REPLACING_PHOTO:["Beim Ersetzen dieses Fotos ist ein Problem aufgetreten. Bitte schließe es und versuche es erneut."],REPLACE_PHOTO:["Foto ersetzen"],PERMANENTLY_REPLACE:["Dieses Foto („","${photoTitle}","“ von ","${username}",") dauerhaft durch <em>","${fileName}","</em> ersetzen?"],REPLACE_WARNING:["Das Ersetzen eines Fotos kann nicht rückgängig gemacht werden. Wähle eine Datei aus, mit der dieses Foto ersetzt werden soll."],REPLACE_UPLOADING:["Hochladen von <em>","${fileName}","</em>..."],ERROR_DELETING_PHOTO:["Beim Löschen dieses Fotos ist ein Fehler aufgetreten. Bitte schließe es und versuche es erneut."],SHOW_MORE_STATS:["Mehr Statistiken anzeigen"],SIGNUP_AND_DOWNLOAD_TITLE:["Du möchtest ein Foto herunterladen."],SIGNUP_AND_DOWNLOAD_VIDEO_TITLE:["Du möchtest ein Foto herunterladen!"],SIGNUP_AND_DOWNLOAD_MESSAGE:["Registriere dich bei Flick und erhalte Zugriff auf Milliarden von Fotos."],SIGNUP_AND_COMMENT_TITLE:["Gib einen Kommentar für dieses Foto ab!"],SIGNUP_AND_COMMENT_MESSAGE:["Registriere dich bei Flickr, um für dieses Foto einen Kommentar abzugeben."],IMMERSIFY:["Eintauchen"],SIGNUP_FOOTER_MESSAGE:["Registriere dich bei Flickr und entdecke Weltklasse-Fotos"],TIMEOUT_FAILURE:["Bei der Anzeige des Fotos sind Probleme aufgetreten. Versuche es bitte noch einmal."],BUY:["Kaufen"],ADD_A_NOTE:["Notiz hinzufügen"],CONFIRM_NOTE_DELETION:["Möchtest du diese Notiz wirklich dauerhaft löschen?"],VIEWING_PRIVACY:["Datenschutzeinstellungen zur Anzeige"],ALLOW_COMMENTING:["Kommentare erlauben"],ALLOW_TAGS_NOTES_PEOPLE:["Tags, Notizen und Personen-Tags erlauben"],SAFETY_LEVEL:["Sicherheitsstufe"],SET_SAFETY_LEVEL:["Sicherheitsstufe festlegen"],KEYBOARD_SHORTCUTS:["Tastaturkürzel"],EDITOR_UPGRADE:["Upgrade des Foto-Editors"],EDITOR_UPGRADE_MESSAGE:["Die Fotobearbeitungsfunktion auf der Fotoseite von Flickr ist wegen einer ausstehenden Aktualisierung derzeit deaktiviert.<br><br>In Kürze besteht Zugriff auf einen stabileren Foto-Editor mit noch mehr Funktionen, der die Nutzung von Flickr weiter optimiert!<br><br>Wir entschuldigen uns für etwaige Unannehmlichkeiten und glauben aber, dass sich das Warten lohnen wird."],ERROR_REPLACING_PHOTO_FILE_TYPE:["Fehler beim Ersetzen des Fotos.  Der Dateityp wurde nicht erkannt. Bitte mit einem anderen Foto erneut versuchen."],EDITING_DISABLED:["Die Bearbeitung ist derzeit deaktiviert"],ENTER_TO_EDIT_TITLE_DESC:["Drücke die Eingabetaste, um den Titel oder die Beschreibung zu bearbeiten."],BACK_TO_PHOTOSTREAM_EDIT:["Zurück zur Fotostream-Bearbeitung"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-zoom-modal",function(a,l){var e=a.Template.Handlebars.revive({1:function(a,l,e,n,r){var s;return'<img src="'+a.escapeExpression("function"==typeof(s=null!=(s=e.smallSrc||(null!=l?l.smallSrc:l))?s:e.helperMissing)?s.call(null!=l?l:{},{name:"smallSrc",hash:{},data:r}):s)+'" class="zoom-small">'},3:function(a,l,e,n,r){var s;return'<img src="'+a.escapeExpression("function"==typeof(s=null!=(s=e.largeSrc||(null!=l?l.largeSrc:l))?s:e.helperMissing)?s.call(null!=l?l:{},{name:"largeSrc",hash:{},data:r}):s)+'" class="zoom-large">'},5:function(a,l,e,n,r){var s;return'<img src="'+a.escapeExpression("function"==typeof(s=null!=(s=e.xLargeSrc||(null!=l?l.xLargeSrc:l))?s:e.helperMissing)?s.call(null!=l?l:{},{name:"xLargeSrc",hash:{},data:r}):s)+'" class="zoom-xlarge">'},compiler:[7,">= 4.0.0"],main:function(a,l,e,n,r){var s,o=null!=l?l:{};return'<div class="zoom-modal hidden">\n\t<div class="zoom-photo-container">\n\t\t'+(null!=(s=e.if.call(o,null!=l?l.smallSrc:l,{name:"if",hash:{},fn:a.program(1,r,0),inverse:a.noop,data:r}))?s:"")+"\n\t\t"+(null!=(s=e.if.call(o,null!=l?l.largeSrc:l,{name:"if",hash:{},fn:a.program(3,r,0),inverse:a.noop,data:r}))?s:"")+"\n\t\t"+(null!=(s=e.if.call(o,null!=l?l.xLargeSrc:l,{name:"if",hash:{},fn:a.program(5,r,0),inverse:a.noop,data:r}))?s:"")+'\n\t\t<span class="facade-of-protection-zoom"></span>\n\t</div>\n</div>\n'},useData:!0}),n={};a.Array.each([],function(l){var e=a.Template.get("hermes/"+l);e&&(n[l]=e)}),a.Template.register("hermes/zoom-modal",function(l,r){return r=r||{},r.partials=r.partials?a.merge(n,r.partials):n,e(l,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("animation-manager",function(n){n.AnimationManager=(function(){function i(){t&&(o.forEach(function(n,i){n()}),n.config.win.requestAnimationFrame(i))}function e(e){return o.push(e),t||(t=!0,n.config.win.requestAnimationFrame(i)),{detach:function(){o.splice(o.indexOf(e),1),o.length||(t=!1)}}}var a,t,o;return a||(t=!1,o=[],YUI.Env.isServer||n.config.win.requestAnimationFrame||(function(){var i,e,a=["webkit","moz"],t=0;for(e=0;e<a.length&&!n.config.win.requestAnimationFrame;++e)i=a[e],n.config.win.requestAnimationFrame=n.config.win[i+"RequestAnimationFrame"],n.config.win.cancelAnimationFrame=n.config.win[i+"CancelAnimationFrame"]||n.config.win[i+"CancelRequestAnimationFrame"];n.config.win.requestAnimationFrame&&n.config.win.cancelAnimationFrame||(n.config.win.requestAnimationFrame=function(n){var i=Date.now(),e=Math.max(t+16,i);return setTimeout(function(){n(t=e)},e-i)},n.config.win.cancelAnimationFrame=clearTimeout)})(),a={subscribe:e}),a})()},"@VERSION@",{requires:[]});YUI.add("zoom-view",function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,forceGPU:null,slowMoMode:!1,sizes:{},supportsMultiLevelZooming:!1,currentZoomLevel:null,currentZoomRegion:{},initializer:function(o){return this.photoId=o.photoId,this.disableIfSmall=!!o.disableIfSmall,YUI.Env.isServer||(e.config.win.location.search.indexOf("gpu=on")>-1?this.forceGPU=!0:e.config.win.location.search.indexOf("gpu=off")>-1&&(this.forceGPU=!1),this.currentZoomLevel=0),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then(function(o){e.set("photo",o)})},buildContainer:function(){return this.setContainerHTML(""),this},activate:function(){var o=this,t=o.getZoomKeyScope();return this.get("photo").getValue("needsInterstitial")?this:(this.parentViewContainer=this.get("container").ancestor(".view"),o.registerEventHandler(o.get("container").on("click",function(e){e.preventDefault(),o.setCursorCoordsFromEvent(e),o.detectSlowMoMode(e),o.zoomIn(o.cursorCoords)})),o.registerEventHandler(e.on("photo:zoom",function(t){o.detectSlowMoMode({shiftKey:t.shift}),t.x&&t.y?(o.cursorCoords=[t.x-e.config.win.pageXOffset,t.y-e.config.win.pageYOffset],o.zoomIn(o.cursorCoords)):o.zoomIn()})),o.attachKeyEvent("down:90",e.betterThrottle(function(e){e.preventDefault(),o.detectSlowMoMode(e),o.canZoomIn()?o.zoomIn():o.zoomOut()},100),"*"),o.attachKeyEvent("down:27",e.betterThrottle(function(e){e.preventDefault(),o.detectSlowMoMode(e),o.zoomOut()},100),t),o.attachKeyEvent("down:37,38,39,40",e.betterThrottle(function(e){var t=[o.currentZoomRegion.left,o.currentZoomRegion.top];switch(e.preventDefault(),e.button){case 37:t[0]+=200;break;case 38:t[1]+=200;break;case 39:t[0]-=200;break;case 40:t[1]-=200}o.panZoomNode(t)},16),t),o.registerEventHandler(o.appContext.flapp.before("activeViewChange",function(t){e.fire("flickr:removeKeyEventScope",o.getZoomKeyScope()),o.detachRegisteredEvents(),o.detachEventHandlers(),o.cleanUp()})),this)},zoomIn:function(o){var t,i,n,r,s,a,h,d,l,g=this,u=this.getZoomPixelRatio(),m=this.getRegionForNode(this.get("container"),!0),c=this.maxMsgNode;if(this.sizes=this.getSizes(),this.sizes.xlarge&&this.sizes.xlarge.url?this.supportsMultiLevelZooming=!0:this.supportsMultiLevelZooming=!1,this.supportsMultiLevelZooming?0===this.currentZoomLevel?n=this.sizes.large:1===this.currentZoomLevel&&(n=this.sizes.xlarge):n=this.sizes.large,r=this.isImageReadyToDisplay(this.sizes.medium.url),s=this.isImageReadyToDisplay(this.sizes.large.url),this.supportsMultiLevelZooming&&(a=this.isImageReadyToDisplay(this.sizes.xlarge.url)),this.supportsMultiLevelZooming&&1===this.currentZoomLevel&&this.panningAnimationHandle.detach(),this.disableIfSmall&&m.width>=this.sizes.large.width)return c||(c=this.maxMsgNode=e.Node.create('<div class="zoom-max-message">'+g.intlMessage({intlName:"photo-page-scrappy.ZOOM_MAX_MESSAGE"})+"</div>")),this.get("container").contains(c)||(c.addClass("hidden"),this.get("container").append(c)),e.soon(function(){c&&c.inDoc()&&(c.removeClass("hidden"),this.maxMsgNodeHidingTimer&&(clearTimeout(this.maxMsgNodeHidingTimer),delete this.maxMsgNodeHidingTimer),this.maxMsgNodeHidingTimer=setTimeout(function(){c&&c.inDoc()&&c.addClass("hidden")},3e3))}),void this.resetSlowMoMode();e.fire("flickr:setKeyEventScope",this.getZoomKeyScope()),this.zoomingIn=!0,this.panningAnimationHandle=e.AnimationManager.subscribe(function(){var t,i,n=g.getDeteriorationRateForEasing(),r={x:0,y:0},s={x:0,y:0},a={x:0,y:0};g.pendingCoords&&(r.x=parseInt(g.pendingCoords[0],10),r.y=parseInt(g.pendingCoords[1],10),g.currentCoords?(s.x=g.currentCoords[0],s.y=g.currentCoords[1]):(t=g.getZoomPanCoordsForCursor(o),i=g.constrainPanCoords(t),s.x=parseInt(i[0],10),s.y=parseInt(i[1],10)),r.x<s.x?a.x=s.x-Math.abs(r.x-s.x)*n:a.x=s.x+Math.abs(r.x-s.x)*n,r.y<s.y?a.y=s.y-Math.abs(r.y-s.y)*n:a.y=s.y+Math.abs(r.y-s.y)*n,a.x=parseInt(a.x,10),a.y=parseInt(a.y,10),a.x===s.x&&(r.x<s.x?a.x=s.x-1:r.x>s.x&&(a.x=s.x+1)),a.y===s.y&&(r.y<s.y?a.y=s.y-1:r.y>s.y&&(a.y=s.y+1)),a.x===r.x&&a.y===r.y||((!0===g.forceGPU||e.config.win.devicePixelRatio>1)&&!1!==g.forceGPU?g.zoomPhotoContainerNode.setStyle("transform","translate3d("+a.x+"px, "+a.y+"px, 0)"):g.zoomPhotoContainerNode.setStyle("transform","translate("+a.x+"px, "+a.y+"px)")),g.currentCoords=[a.x,a.y],a.x===r.x&&a.y===r.y&&delete g.pendingCoords)}),this.zoomNode?(this.zoomingOut=!1,(t=this.zoomNode).removeClass("hiding"),this.detachEventHandlers()):t=this.zoomNode=e.Node.create(this.templates("zoom-modal")({smallSrc:r?this.sizes.medium.url:this.sizes.small.url,largeSrc:s?this.sizes.large.url:"",xLargeSrc:a?this.sizes.xlarge.url:""})),i=this.zoomPhotoContainerNode=t.one(".zoom-photo-container"),this.zoomImageFullWidth=n.width/u,this.zoomImageFullHeight=n.height/u,o||(g.cursorCoords=o=[this.appContext.viewportData.viewport.width/2,this.appContext.viewportData.viewport.height/2]),h=this.getZoomPanCoordsForCursor(o),h=this.constrainPanCoords(h),d={left:h[0],top:h[1],width:this.zoomImageFullWidth,height:this.zoomImageFullHeight},0===g.currentZoomLevel?(i.setStyle("transition","none"),this.resizeZoomNode(m,!1)):this.resizeZoomNode(this.getRegionForNode(i),!1),t.on("click",function(e){g.zoomingIn||(e.preventDefault(),g.detectSlowMoMode(e),g.canZoomIn()?(g.setCursorCoordsFromEvent(e),g.zoomIn(g.cursorCoords)):g.zoomOut())}),e.one("body").append(t),i.setStyle("width",d.width),i.setStyle("height",d.height),e.soon(function(){g.zoomingIn&&(t.removeClass("hidden"),i.setStyle("transition",""),"ontouchstart"in document&&e.use("event-touch",function(){g.touchHandlers=[],g.touchHandlers.push(e.on("touchstart",function(e){e.changedTouches.length&&1===e.changedTouches.length&&(g.touching=[e.changedTouches[0].pageX,e.changedTouches[0].pageY])})),g.touchHandlers.push(e.on("touchmove",function(e){var o,t,i=e.pageX,n=e.pageY;g.touching&&e.changedTouches.length&&1===e.changedTouches.length&&(i=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY,e.preventDefault(),o=i-g.touching[0],t=n-g.touching[1],g.touching=[i,n],g.panZoomNode([g.currentZoomRegion.left+o,g.currentZoomRegion.top+t]))})),g.touchHandlers.push(e.on("touchend",function(e){delete g.touching}))}),t.on("mousemove",g.zoomMouseMoveHandler.bind(g)),g.mouseWheelHandler=(function(){var e=g.zoomScrollWheelHandler.bind(g);return l="onwheel"in document.createElement("div")?"wheel":"mousewheel",g.zoomNode.getDOMNode().addEventListener(l,e,!1),{detach:function(){g.zoomNode.getDOMNode().removeEventListener(l,e,!1)}}})(),g.parentViewContainer.addClass("zoomed"),g.resizeZoomNode(d,!0).then(function(){g.zoomingIn&&(g.zoomingIn=!1,g.zoomedIn=!0,i.removeClass("zoom-level-"+g.currentZoomLevel),g.currentZoomLevel+=1,i.addClass("zoom-level-"+g.currentZoomLevel),g.zoomNode.toggleClass("max-zoom-level",!g.canZoomIn()),g.resetSlowMoMode(),g.panZoomNodeToCurrentCoords(),s||i.append('<img src="'+g.sizes.large.url+'" class="zoom-large">'),g.supportsMultiLevelZooming&&!a&&i.append('<img src="'+g.sizes.xlarge.url+'" class="zoom-xlarge">'))}))})},zoomOut:function(){var o=this,t=this.zoomNode;e.fire("flickr:removeKeyEventScope",this.getZoomKeyScope()),this.detachEventHandlers(),this.resizeZoomNode(this.getRegionForNode(this.get("container"),!0),!0),t.addClass("hiding"),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!0,setTimeout(function(){o.zoomingOut&&t&&t._node&&(o.parentViewContainer.removeClass("zoomed"),t.removeClass("hiding"),t.addClass("hidden"),o.resetSlowMoMode(),setTimeout(function(){o.zoomingOut&&(o.cleanUp(),o.zoomingOut=!1,o.currentZoomLevel=0)},200))},this.getZoomTransitionTime()),delete this.pendingCoords,delete this.currentCoords},resizeZoomNode:function(o,t){var i,n,r=this,s=e.config.win.performance&&e.config.win.performance.now;return t?new e.Promise(function(t,a){function h(a){var d=(function(a){var h,d=((s?a:Date.now())-i)/r.getZoomTransitionTime();return d>=1?(h=o,r.isAnimatingZoom=!1,e.soon(t)):h={left:n.left+(o.left-n.left)*d,top:n.top+(o.top-n.top)*d,width:n.width+(o.width-n.width)*d,height:n.height+(o.height-n.height)*d},h})(a);(r.zoomingIn||r.zoomingOut)&&(r.resizeZoomNode(d,!1),d!==o&&e.config.win.requestAnimationFrame(h))}r.isAnimatingZoom=!0,i=s?e.config.win.performance.now():Date.now(),n=r.currentZoomRegion,e.config.win.requestAnimationFrame(h)}):(this.currentZoomRegion=o,this.zoomPhotoContainerNode&&this.zoomPhotoContainerNode.setStyle("transform","translate("+o.left+"px, "+o.top+"px) scale("+o.width/this.zoomImageFullWidth+")"),e.Promise.resolve())},zoomMouseMoveHandler:function(e){this.setCursorCoordsFromEvent(e),this.isAnimatingZoom||this.panZoomNodeToCurrentCoords()},zoomScrollWheelHandler:function(e){e.preventDefault();var o=e.wheelDeltaX,t=e.wheelDeltaY;void 0===o&&(o=-e.deltaX||0),void 0===t&&(t=-e.deltaY||0),this.panZoomNode([this.currentZoomRegion.left+o,this.currentZoomRegion.top+t])},getSizes:function(){var e=this.parentViewContainer.one(".low-res-photo"),o=this.parentViewContainer.one(".main-photo"),t=this.getLargerSize(o.getAttribute("src")),i=this.getLargestSize();return{small:{url:e.getAttribute("src"),width:parseInt(e.getAttribute("width"),10),height:parseInt(e.getAttribute("height"),10)},medium:{url:o.getAttribute("src"),width:parseInt(o.getAttribute("width"),10),height:parseInt(o.getAttribute("height"),10)},large:t,xlarge:t.url===i.url?null:i}},getLargerSize:function(o){var t,i,n,r=0,s=0;return this.appContext.flipper.isFlipped("enable-two-step-zoom")?("o"===(t=this.get("photo").getValue("ascendingSizes"))[t.length-1].key&&t.pop(),e.Array.each(t,function(e,t){e.url===o&&(r=t),"k"===e.key&&(s=t)}),(i=t[r+1])?(n=i,t[s]&&i.width<t[s].width&&(n=t[s])):n=t[t.length-1],n):this.getLargestSize()},getLargestSize:function(){return this.get("photo").getLargestSize()},getDeteriorationRateForEasing:function(){return.2},getZoomPixelRatio:function(){if(!this.appContext.flipper.isFlipped("enable-two-step-zoom"))return 1;var e,o=this.parentViewContainer.one(".main-photo");return o&&(o=o.getDOMNode()).naturalWidth&&(e=o.naturalWidth/parseInt(o.getAttribute("width"),10))<window.devicePixelRatio?e:window.devicePixelRatio?window.devicePixelRatio:1},getZoomEdgeMargin:function(){return 100},getZoomPanCoordsForCursor:function(e){if(e){var o=this.getZoomEdgeMargin(),t=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],i=[e[0]/t[0],e[1]/t[1]],n=[this.zoomImageFullWidth,this.zoomImageFullHeight],r=[n[0]+2*o,n[1]+2*o];return[i[0]*(t[0]-r[0]),i[1]*(t[1]-r[1])]}},getRegionForNode:function(o,t){var i={left:o.getX()-e.config.win.pageXOffset,top:o.getY()-e.config.win.pageYOffset,width:parseInt(o.getStyle("width"),10),height:parseInt(o.getStyle("height"),10)};return t&&(i.left-=this.getZoomEdgeMargin(),i.top-=this.getZoomEdgeMargin()),i},getZoomTransitionTime:function(){return 200*(this.slowMoMode?10:1)},getZoomKeyScope:function(){return this.name+this._yuid},canZoomIn:function(){return 0===this.currentZoomLevel||this.supportsMultiLevelZooming&&1===this.currentZoomLevel},setCursorCoordsFromEvent:function(o){return this.cursorCoords=[o.pageX-e.config.win.pageXOffset,o.pageY-e.config.win.pageYOffset],this.cursorCoords},panZoomNodeToCurrentCoords:function(){if(this.zoomedIn){var e=this.getZoomPanCoordsForCursor(this.cursorCoords);e&&this.panZoomNode(e)}},panZoomNode:function(e){this.currentZoomRegion.left===e[0]&&this.currentZoomRegion.top===e[1]||(e=this.constrainPanCoords(e),this.currentZoomRegion.left=e[0],this.currentZoomRegion.top=e[1],this.pendingCoords=e)},constrainPanCoords:function(e){var o,t,i=this.getZoomEdgeMargin(),n=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],r=[this.zoomImageFullWidth,this.zoomImageFullHeight],s=[r[0]+2*i,r[1]+2*i];return 0,o=n[0]-r[0]-2*i,0,t=n[1]-r[1]-2*i,e[0]>0?e[0]=0:e[0]<o&&(e[0]=o),e[1]>0?e[1]=0:e[1]<t&&(e[1]=t),r[0]<n[0]&&(e[0]=.5*(n[0]-s[0])),r[1]<n[1]&&(e[1]=.5*(n[1]-s[1])),e},detectSlowMoMode:function(e){e.shiftKey&&(document.getSelection().removeAllRanges(),this.slowMoMode=!0)},resetSlowMoMode:function(){this.slowMoMode=!1},isImageReadyToDisplay:function(e){var o;return!!e&&(o=new Image,o.src=e,o.complete||o.naturalWidth)},detachEventHandlers:function(){this.zoomNode&&(this.zoomNode.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach(function(e){e.detach()}),delete this.touchHandlers))},cleanUp:function(){this.zoomNode&&(this.zoomNode.remove(!0),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!1,delete this.zoomNode,delete this.zoomPhotoContainerNode,delete this.pendingCoords,delete this.currentCoords,this.panningAnimationHandle.detach())}})},"@VERSION@",{requires:["flickr-view","better-throttle","flickr-promise","hermes-template-zoom-modal","animation-manager"],optional:["photo-models"],langBundles:["photo-page-scrappy"]});